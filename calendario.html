<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario - PLANIFY</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="proyecto.css">
    <link rel="stylesheet" href="calendario.css">
    <link rel="shortcut icon" type="image/png" href="/Logos/roco.png">
</head>
<body class="bg-gray-100">

    <div class="min-h-full">
        <nav class="color">
          <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
            <div class="flex h-16 items-center justify-between">
              <div class="flex items-center">
                <div class="flex-shrink-0">
                  <img class="h-20 w-25" src="Logos/roco.png" alt="PLANIFY">
                </div>
                <div class="flex-shrink-0">
                  <img class="h-40 w-25" src="Logos/PLANify.png" alt="PLANIFY">
                </div>
                <div class="hidden md:block">
                  <div class="ml-10 flex items-baseline space-x-4">
                    <a href="index.html" class="rounded-md bg-gray-900 px-3 py-2 text-sm font-medium text-white">Inicio</a>
                    <a href="proyectos.html" class="rounded-md px-3 py-2 text-sm font-medium text-black-300 hover:bg-gray-700 hover:text-white">Proyectos</a>
                    <a href="" class="rounded-md px-3 py-2 text-sm font-medium text-black-300 hover:bg-gray-700 hover:text-white">Tareas</a>
                    <a href="calendario.html" class="rounded-md px-3 py-2 text-sm font-medium text-black-300 hover:bg-gray-700 hover:text-white">Calendario</a>
                    <a href="iniciarsesion.html" class="rounded-md px-3 py-2 text-sm font-medium text-black-300 hover:bg-gray-700 hover:text-white">Cerrar Sesion</a>
                  </div>
                </div>
              </div>
              <div class="hidden md:block">
                <div class="ml-4 flex items-center md:ml-6">
                  <button type="button" class="relative rounded-full bg-gray-800 p-1 text-gray-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800">
                    <span class="absolute -inset-1.5"></span>
                    <span class="sr-only">View notifications</span>
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0" />
                    </svg>
                  </button>
      
                  <!-- Profile dropdown -->
                  <div class="relative ml-3">
                    <div>
                      <button type="button" class="relative flex max-w-xs items-center rounded-full bg-gray-800 text-sm focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800" id="user-menu-button" aria-expanded="false" aria-haspopup="true">
                        <span class="absolute -inset-1.5"></span>
                        <span class="sr-only">Open user menu</span>
                        <img class="h-8 w-8 rounded-full" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="">
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="-mr-2 flex md:hidden">
                <!-- Mobile menu button -->
                <button type="button" class="relative inline-flex items-center justify-center rounded-md bg-gray-800 p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800" aria-controls="mobile-menu" aria-expanded="false">
                  <span class="absolute -inset-0.5"></span>
                  <span class="sr-only">Open main menu</span>
                  <!-- Menu open: "hidden", Menu closed: "block" -->
                  <svg class="block h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                  </svg>
                  <!-- Menu open: "block", Menu closed: "hidden" -->
                  <svg class="hidden h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                  </svg>
                </button>
              </div>
            </div>
          </div>
      
          <!-- Mobile menu, show/hide based on menu state. -->
          <div class="md:hidden" id="mobile-menu">
            <div class="space-y-1 px-2 pb-3 pt-2 sm:px-3">
              <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-gray-700 hover:text-white" -->
              <a href="#" class="block rounded-md bg-gray-900 px-3 py-2 text-base font-medium text-white" aria-current="page">Dashboard</a>
              <a href="#" class="block rounded-md px-3 py-2 text-base font-medium text-gray-300 hover:bg-gray-700 hover:text-white">Team</a>
              <a href="#" class="block rounded-md px-3 py-2 text-base font-medium text-gray-300 hover:bg-gray-700 hover:text-white">Projects</a>
              <a href="#" class="block rounded-md px-3 py-2 text-base font-medium text-gray-300 hover:bg-gray-700 hover:text-white">Calendar</a>
              <a href="#" class="block rounded-md px-3 py-2 text-base font-medium text-gray-300 hover:bg-gray-700 hover:text-white">Reports</a>
            </div>
            <div class="border-t border-gray-700 pb-3 pt-4">
              <div class="flex items-center px-5">
                <div class="flex-shrink-0">
                  <img class="h-10 w-10 rounded-full" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="">
                </div>
                <div class="ml-3">
                  <div class="text-base font-medium leading-none text-white">Tom Cook</div>
                  <div class="text-sm font-medium leading-none text-gray-400">tom@example.com</div>
                </div>
                <button type="button" class="relative ml-auto flex-shrink-0 rounded-full bg-gray-800 p-1 text-gray-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800">
                  <span class="absolute -inset-1.5"></span>
                  <span class="sr-only">View notifications</span>
                  <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0" />
                  </svg>
                </button>
              </div>
              <div class="mt-3 space-y-1 px-2">
                <a href="#" class="block rounded-md px-3 py-2 text-base font-medium text-gray-400 hover:bg-gray-700 hover:text-white">Your Profile</a>
                <a href="#" class="block rounded-md px-3 py-2 text-base font-medium text-gray-400 hover:bg-gray-700 hover:text-white">Settings</a>
                <a href="#" class="block rounded-md px-3 py-2 text-base font-medium text-gray-400 hover:bg-gray-700 hover:text-white">Sign out</a>
              </div>
            </div>
          </div>
        </nav>

        <header class="bg-white shadow">
            <div class="mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8">
                <h1 class="text-xl font-bold tracking-tight text-gray-900 text-left">Calendario del Mes</h1>
                <div class="mt-4 flex justify-center">
                    <button id="openModal" class="bg-green-500 py-3 px-6 rounded-xl text-white shadow-xl hover:bg-green-600 hover:shadow-inner focus:outline-none transition duration-300 ease-in-out">
                        Agregar fecha de entrega
                    </button>                                                                                
                </div>
            </div>
        </header>

        <main class="bg-gray-100 p-6">
            <div class="mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8" id="calendarContainer">
                <!-- Aquí se generarán los calendarios -->
            </div>
        </main>
    </div>

    <!-- Modal para agregar fecha de entrega -->
    <div id="modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center">
        <div class="bg-white rounded-lg p-6 w-96">
            <h2 class="text-2xl font-bold mb-4">Selecciona la fecha de entrega</h2>
            <form id="dateForm">
                <label for="deliveryDate" class="block text-lg mb-2">Fecha de entrega:</label>
                <input type="date" id="deliveryDate" class="border p-2 rounded w-full mb-4">

                <div class="mb-4">
                    <p class="font-semibold">Importancia:</p>
                    <div class="flex space-x-4">
                        <button type="button" id="mediumPriority" class="py-2 px-4 border border-yellow-500 text-yellow-500 rounded">Media</button>
                        <button type="button" id="highPriority" class="py-2 px-4 border border-red-500 text-red-500 rounded">Alta</button>
                        <button type="button" id="deliveredPriority" class="py-2 px-4 border border-green-500 text-green-500 rounded">Entregado</button>
                    </div>
                </div>

                <div class="flex justify-between">
                    <button type="button" id="closeModal" class="bg-gray-500 text-white py-2 px-4 rounded">Cancelar</button>
                    <button type="submit" class="bg-green-500 text-white py-2 px-4 rounded">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Variables de calendario
        const openModalButton = document.getElementById('openModal');
        const modal = document.getElementById('modal');
        const closeModalButton = document.getElementById('closeModal');
        const dateForm = document.getElementById('dateForm');
        const calendarContainer = document.getElementById('calendarContainer');
        let importance = ''; // Variable para almacenar la importancia seleccionada

        // Función para generar el calendario de un mes
        function generateCalendar(month, year) {
            const daysInMonth = new Date(year, month, 0).getDate(); // Obtener los días del mes
            const firstDayOfMonth = new Date(year, month - 1, 1).getDay(); // Obtener el primer día del mes (0 = domingo)
            const calendarTable = document.createElement('table');
            calendarTable.classList.add('min-w-full', 'table-auto', 'mb-8');

            const monthNames = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];
            const monthName = monthNames[month - 1];

            // Crear encabezado del calendario
            const thead = document.createElement('thead');
            const headerRow = document.createElement('tr');
            ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado', 'Domingo'].forEach(day => {
                const th = document.createElement('th');
                th.classList.add('py-2', 'px-4', 'border-b', 'text-center');
                th.textContent = day;
                headerRow.appendChild(th);
            });
            thead.appendChild(headerRow);
            calendarTable.appendChild(thead);

            // Crear cuerpo del calendario
            const tbody = document.createElement('tbody');
            let currentDay = 1;
            let row;

            // Crear las filas del calendario
            for (let i = 0; i < 6; i++) {
                row = document.createElement('tr');
                for (let j = 0; j < 7; j++) {
                    const cell = document.createElement('td');
                    cell.classList.add('py-4', 'px-4', 'text-center', 'border-b', 'date-cell');
                    if (i === 0 && j < firstDayOfMonth) {
                        cell.classList.add('border-transparent');
                    } else if (currentDay <= daysInMonth) {
                        cell.textContent = currentDay;
                        cell.dataset.day = currentDay;
                        cell.dataset.month = month;
                        cell.dataset.year = year;
                        cell.id = `calendar-${year}-${month}-${currentDay}`; // Agregar ID único
                        currentDay++;
                    }
                    row.appendChild(cell);
                }
                tbody.appendChild(row);
            }
            calendarTable.appendChild(tbody);

            // Crear encabezado del mes
            const monthHeader = document.createElement('div');
            monthHeader.classList.add('text-xl', 'font-bold', 'text-gray-900', 'text-left', 'mb-2');
            monthHeader.textContent = `${monthName} ${year}`;

            const monthWrapper = document.createElement('div');
            monthWrapper.classList.add('mb-10');
            monthWrapper.appendChild(monthHeader);
            monthWrapper.appendChild(calendarTable);

            calendarContainer.appendChild(monthWrapper);
        }

        // Generar solo 2 meses consecutivos (mes actual y siguiente)
        const currentDate = new Date();
        generateCalendar(currentDate.getMonth() + 1, currentDate.getFullYear()); // Mes actual
        generateCalendar(currentDate.getMonth() + 2, currentDate.getFullYear()); // Mes siguiente

        // Abrir el modal
        openModalButton.addEventListener('click', function () {
            modal.classList.remove('hidden');
        });

        // Cerrar el modal
        closeModalButton.addEventListener('click', function () {
            modal.classList.add('hidden');
        });

        // Seleccionar importancia
        document.getElementById('mediumPriority').addEventListener('click', function () {
            importance = 'yellow';
        });

        document.getElementById('highPriority').addEventListener('click', function () {
            importance = 'red';
        });

        document.getElementById('deliveredPriority').addEventListener('click', function () {
            importance = 'green';
        });

     // Guardar la fecha seleccionada
dateForm.addEventListener('submit', function (e) {
    e.preventDefault();

    const selectedDate = document.getElementById('deliveryDate').value;
    const [year, month, day] = selectedDate.split("-");
    const selectedDateObj = new Date(year, month - 1, day);

    const monthNumber = selectedDateObj.getMonth() + 1; // Convertir mes a formato 1-12
    const dayNumber = selectedDateObj.getDate();
    const yearNumber = selectedDateObj.getFullYear();

    const dayCell = document.querySelector(`#calendar-${yearNumber}-${monthNumber}-${dayNumber}`);

    if (dayCell) {
        // Limpiar el color anterior si existe
        dayCell.classList.remove('bg-yellow-400', 'bg-red-500', 'bg-green-500');
        
        // Cambiar el número del día y el texto a blanco y en negrita
        dayCell.innerHTML = `<span class="text-white font-bold">${dayNumber}</span> <span class="text-white font-bold text-xs">${importance === 'yellow' ? 'Entrega (Media)' : importance === 'red' ? 'Entrega (Alta)' : 'Entregado'}</span>`;
        
        // Añadir el nuevo color basado en la importancia seleccionada
        dayCell.classList.add(importance === 'yellow' ? 'bg-yellow-400' : importance === 'red' ? 'bg-red-500' : 'bg-green-500');
    }

    modal.classList.add('hidden');
});



    </script>
</body>
</html>
